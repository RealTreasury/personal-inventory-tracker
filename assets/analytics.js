/*! Personal Inventory Tracker Enhanced */
var PITAnalytics=(()=>{var U=Object.create;var A=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var L=(a=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(a,{get:(e,o)=>(typeof require!="undefined"?require:e)[o]}):a)(function(a){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')});var V=(a,e,o,d)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of H(e))!G.call(a,l)&&l!==o&&A(a,l,{get:()=>e[l],enumerable:!(d=O(e,l))||d.enumerable});return a};var w=(a,e,o)=>(o=a!=null?U(v(a)):{},V(e||!a||!a.__esModule?A(o,"default",{value:a,enumerable:!0}):o,a));var T=w(L("react")),y=L("react-dom/client");var u=w(L("react"));var g=L("react");var B=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,o,d)=>d?d.toUpperCase():o.toLowerCase()),P=a=>{let e=W(a);return e.charAt(0).toUpperCase()+e.slice(1)},h=(...a)=>a.filter((e,o,d)=>!!e&&e.trim()!==""&&d.indexOf(e)===o).join(" ").trim(),D=a=>{for(let e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var I=L("react");var M={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};var F=(0,I.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:l="",children:f,iconNode:C,...r},i)=>(0,I.createElement)("svg",{ref:i,...M,width:e,height:e,stroke:a,strokeWidth:d?Number(o)*24/Number(e):o,className:h("lucide",l),...!f&&!D(r)&&{"aria-hidden":"true"},...r},[...C.map(([k,t])=>(0,I.createElement)(k,t)),...Array.isArray(f)?f:[f]]));var m=(a,e)=>{let o=(0,g.forwardRef)(({className:d,...l},f)=>(0,g.createElement)(F,{ref:f,iconNode:e,className:h(`lucide-${B(P(a))}`,`lucide-${a}`,d),...l}));return o.displayName=P(a),o};var E=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],c=m("circle-check-big",E);var z=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],x=m("package",z);var X=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],n=m("triangle-alert",X);var N=({timeRange:a=30})=>{let[e,o]=(0,u.useState)("purchases"),[d,l]=(0,u.useState)([]),f=(0,u.useRef)(null);(0,u.useEffect)(()=>{(async()=>{var s,p;try{let S=await fetch(`${(s=window.pitApp)==null?void 0:s.restUrl}analytics?range=${a}`,{headers:{"X-WP-Nonce":(p=window.pitApp)==null?void 0:p.nonce}});if(S.ok){let b=await S.json();l(b.items)}}catch(S){}})()},[a]);let C=(0,u.useMemo)(()=>new Date(Date.now()-a*24*60*60*1e3),[a]),r=(0,u.useMemo)(()=>d.filter(t=>new Date(t.last_purchased)>=C),[d,C]),i=(0,u.useMemo)(()=>({purchases:{label:"Recent Purchases",icon:c,filter:()=>!0},lowStock:{label:"Low Stock",icon:n,filter:t=>t.current_qty<t.threshold},expired:{label:"Expired",icon:x,filter:t=>t.expiry&&new Date(t.expiry)<new Date}}),[]),k=(0,u.useMemo)(()=>{let t=i[e];return r.filter(s=>t.filter(s))},[r,i,e]);return(0,u.useEffect)(()=>{let t;async function s(){let{Chart:p}=await import("https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.esm.js");f.current&&(t=new p(f.current,{type:"bar",data:{labels:["Purchases","Low Stock","Expired"],datasets:[{data:[r.length,r.filter(i.lowStock.filter).length,r.filter(i.expired.filter).length],backgroundColor:["#3b82f6","#f59e0b","#ef4444"]}]},options:{responsive:!0,plugins:{legend:{display:!1}}}}))}return s(),()=>t&&t.destroy()},[r,i]),u.default.createElement("div",{className:"space-y-6"},u.default.createElement("div",{className:"flex space-x-4"},Object.entries(i).map(([t,s])=>{let p=s.icon;return u.default.createElement("button",{key:t,onClick:()=>o(t),className:`flex items-center px-4 py-2 rounded-lg border transition-colors ${e===t?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`},u.default.createElement(p,{className:"h-5 w-5 mr-2"}),u.default.createElement("span",null,s.label),u.default.createElement("span",{className:"ml-2 text-sm text-gray-500"},r.filter(s.filter).length))})),u.default.createElement("canvas",{ref:f,className:"max-w-md"}),u.default.createElement("div",null,u.default.createElement("ul",{className:"divide-y divide-gray-200"},k.map(t=>u.default.createElement("li",{key:t.id,className:"py-2 flex justify-between"},u.default.createElement("span",{className:"font-medium"},t.title),e==="purchases"&&u.default.createElement("span",{className:"text-sm text-gray-500"},new Date(t.last_purchased).toLocaleDateString()),e==="lowStock"&&u.default.createElement("span",{className:"text-sm text-gray-500"},t.current_qty,"/",t.threshold),e==="expired"&&u.default.createElement("span",{className:"text-sm text-gray-500"},t.expiry?new Date(t.expiry).toLocaleDateString():"N/A"))))))},R=N;var q=document.getElementById("pit-analytics");q&&(0,y.createRoot)(q).render(T.default.createElement(R,{timeRange:30}));})();
/*! Bundled license information:

lucide-react/dist/esm/shared/src/utils.js:
lucide-react/dist/esm/defaultAttributes.js:
lucide-react/dist/esm/Icon.js:
lucide-react/dist/esm/createLucideIcon.js:
lucide-react/dist/esm/icons/circle-check-big.js:
lucide-react/dist/esm/icons/package.js:
lucide-react/dist/esm/icons/triangle-alert.js:
lucide-react/dist/esm/lucide-react.js:
  (**
   * @license lucide-react v0.541.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)
*/
